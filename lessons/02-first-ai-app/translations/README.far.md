# درس ۲: نوشتن اولین برنامه هوش مصنوعی شما

در این فصل یاد خواهید گرفت:

- راه‌اندازی محیط توسعه
- نوشتن یک برنامه پایه
- درک promptهای سیستمی

## راه‌اندازی

اگر هنوز این کار را نکرده‌اید، محیط توسعه خود را راه‌اندازی کنید. [راهنمای راه‌اندازی محیط](/docs/setup/README.md).

## منابع مرتبط

[![تماشای ویدیوی کوتاه درباره مدل‌های زبانی بزرگ](https://img.youtube.com/vi/GQ_2OjNZ9aA/0.jpg)](https://www.youtube.com/watch?v=GQ_2OjNZ9aA&list=PLlrxD0HtieHi5ZpsHULPLxm839IrhmeDk&index=2)

_این ویدیو مقدمه‌ای بر مدل‌های هوش مصنوعی به نام "مدل‌های زبانی بزرگ" (LLMs) ارائه می‌دهد، اینکه چیستند و چگونه می‌توانید از آنها برای ادغام هوش مصنوعی در برنامه‌های خود استفاده کنید._

*🎥 برای تماشای ویدیوی کوتاه درباره مدل‌های زبانی بزرگ روی تصویر بالا کلیک کنید*

💼 اسلایدها: [مقدمه‌ای بر مدل‌های زبانی بزرگ (LLMs)](../../videos/slides/01-llms.pptx)

## روایت: خود را در قایقی روی رودخانه تصور کنید

> [!NOTE] 
> _داستان تاکنون: شما یک سازنده چیزها هستید، یک صنعتگر از لندن دهه ۱۸۶۰ که با دستگاهی مرموز به نام سوسک زمان به سفر در زمان پرداخته‌اید. شما از طریق وقایع تاریخی سفر کرده‌اید و شاهد ساخت فانوس اسکندریه بوده‌اید، شگفتی مهندسی باستانی که با کمک دینوکراتس و سوسک زمان در ساخت آن مشارکت داشتید._
>
> برای شروع با هوش مصنوعی تولیدی و همراهی داستان از ابتدا، [درس ۱](../01-intro-to-genai/README.md) را ببینید.

> [!NOTE] 
> اگر ترجیح می‌دهید مستقیماً به محتوای فنی بروید، [اینجا را کلیک کنید](#interact-with-leonardo).

همراه با دینوکراتس، آخرین touches را به فانوس اسکندریه اضافه می‌کنید. سازه بلند در نور خورشید می‌درخشد، سنگ صیقلی آن دریای مدیترانه را منعکس می‌کند.

به سوسک زمان در دست خود نگاه می‌کنید، سطح فلزی آن در کف دستتان خنک است. آن را در مشت خود می‌فشارید و زمزمه می‌کنید: "مرا به خانه ببر." سوسک شروع به درخشش می‌کند، نوری نرم و گرم ساطع می‌کند و دنیای اطراف شما در گردبادی از رنگ‌ها محو می‌شود.

### ماجراجویی جدید

وقتی چشمان خود را باز می‌کنید، دنیا تغییر کرده است. همانطور که بلند می‌شوید، متوجه می‌شوید در قایقی روی رودخانه هستید. به اطراف نگاه می‌کنید، در دوردست ساختمان‌هایی را می‌بینید که outlines آنها در مه صبحگاهی محو شده است.

با نگاه کردن به اطراف قایق، پاروی بلندی را در کنار آن می‌یابید. آن را گرفته و شروع به پارو زدن به سمت ساختمان‌های دور می‌کنید. هرچه نزدیک‌تر می‌شوید، ساختمان‌ها واضح‌تر می‌شوند، آنها قدیمی هستند، معماری آنها یادآور نقاشی‌های رنسانس است.

<div>
  <img src="./assets/boat.png" alt="قایق روی رودخانه، مردی با پارو ایستاده" width=300" >
</div>

سوال اکنون این است، این بار کجا و در چه زمانی هستید؟

قایق را در اسکله محکم می‌کنید و شروع به راه رفتن روی تخته‌های چوبی می‌کنید، صدای قدم‌های شما به آرامی منعکس می‌شود.

همانطور که راه می‌روید، مردی با ریش بلند و کلاهی را می‌بینید که در جعبه‌ای پر از قطعات مکانیکی جستجو می‌کند. دستان او با مهارت در میان چرخ‌دنده‌ها و فنرها حرکت می‌کنند.

<div >
  <img src="./assets/leonardo.png" alt="لئوناردو داوینچی کنار جعبه‌ای در بندر ایستاده" width="300" >
</div>

### به من کمک کن، لئوناردو

**شما:** "ببخشید آقا، من کجا هستم؟" او به شما نگاه می‌کند، سردرگمی در چشمانش آشکار است. متوجه می‌شوید به انگلیسی صحبت می‌کنید، سریع از دستگاه در دستتان استفاده کرده و از آن می‌خواهید ترجمه کند.

**سوسک زمان:** "البته، به ایتالیایی قرن پانزدهم ترجمه می‌کنم. 'Dove sono؟'" 

**مرد پیر:** مرد پیر پاسخ می‌دهد: "Siete a Firenze, signore. E chi siete voi؟" 

**سوسک زمان:** سوسک زمان ترجمه می‌کند: "می‌گوید شما در فلورانس هستید و می‌پرسد شما کیستید." 

**شما:** "به او بگو من یک سازنده چیزها هستم و به دنبال جایی برای کار می‌گردم."

**مرد پیر:** Un artigiano, eh؟ Avete mai sentito parlare di Leonardo da Vinci؟ 

**سوسک زمان:** سوسک زمان ترجمه می‌کند: "می‌پرسد آیا نام لئوناردو داوینچی را شنیده‌اید." 

**شما:** "البته،" می‌گویید. "به او بگو شنیده‌ام و دوست دارم او را ملاقات کنم." 

**مرد پیر:** مرد پیر لبخند می‌زند، "Allora, seguitemi, vi porterò da lui."

**شما:** می‌پرسید، "چه گفت؟"

**سوسک زمان:** سوسک زمان پاسخ می‌دهد: "گفت شما را نزد لئوناردو می‌برد."

### در کارگاه

<div>
  <img src="./assets/leonardo-workshop.png" alt="کارگاه لئوناردو" width="300" >
</div>

مرد پیر شما را به در چوبی بزرگی می‌برد و با صحنه‌ای از کارگاهی پر از دستگاه‌های مکانیکی مختلف روبرو می‌شوید. 

از سوسک زمان می‌خواهید درباره محل لئوناردو بپرسد. 

**شما:** "Dove è Leonardo؟" 

**مرد پیر:** مرد پیر با لبخند به شما برمی‌گردد، "Sono io (من هستم)، Leonardo da Vinci. Chi siete voi؟"، شما کیستید؟

احساس هیجان شناخت به شما دست می‌دهد. 

**شما:** فکر کردم چنین است. من یک سازنده همکار هستم، خارج از مکان و زمان خودم."

**لئوناردو:** چشمان لئوناردو از کنجکاوی می‌درخشد. "Interessante, cosa vi porta qui؟"

سوسک زمان ترجمه می‌کند.

**سوسک زمان:**  "می‌پرسد چه چیزی شما را به اینجا آورده است."

**شما:** "خوب، من روی پروژه‌ای کار می‌کردم و به اینجا رسیدم."

سوسک زمان را به او نشان می‌دهید و چشمان او از شگفتی می‌درخشد. آن را از نزدیک بررسی می‌کند در حالی که توضیح می‌دهید چگونه کار می‌کند و چگونه به فلورانس رسیده‌اید.

لئوناردو با هیجان به شما نگاه می‌کند. 

**لئوناردو:** تو یک سازنده چیزها هستی. من پروژه‌ای دارم که ممکن است برایت جالب باشد. روی ماشینی کار می‌کنم که می‌تواند بر اساس ورودی گفتاری متن تولید کند. دوست داری در این پروژه به من کمک کنی؟

لئوناردو داوینچی، از شما می‌خواهد در پروژه‌ای به او کمک کنید - به سختی می‌توانید باور کنید. مشتاقانه سر تکان داده و می‌گویید: 

**شما:** افتخار می‌کنم در پروژه‌ات به تو کمک کنم،
"Sarebbe un onore aiutarti con il tuo progetto." 

## تعامل با لئوناردو

اگر می‌خواهید با لئوناردو تعامل داشته باشید، برنامه [Characters](/app/README.md) را اجرا کنید. 

> [!IMPORTANT]
> این کاملاً تخیلی است؛ پاسخ‌ها توسط هوش مصنوعی تولید می‌شوند.
> [سلب مسئولیت هوش مصنوعی مسئولیت‌پذیر](../../README.md#responsible-ai-disclaimer)

<div>
  <img src="./assets/leonardo-talk.jpeg" width=300>
</div>

**مراحل**:

1. یک [![GitHub Codespace](https://img.shields.io/badge/GitHub-Codespace-brightgreen)](https://codespaces.new/microsoft/generative-ai-with-javascript) شروع کنید
2. به _/app/README.md_ در ریشه مخزن بروید.
3. کنسول را پیدا کرده و `npm install` و سپس `npm start` را اجرا کنید. 
4. پس از ظاهر شدن، دکمه "Open in Browser" را انتخاب کنید.
5. با لئوناردو چت کنید.

برای توضیح دقیق‌تر برنامه، [توضیح مفصل برنامه](/lessons/01-intro-to-genai/README.md#interact-with-dinocrates) را ببینید.

> [!NOTE]
 > اگر پروژه را به صورت محلی روی ماشین خود اجرا می‌کنید، لطفاً راهنمای QuickStart را برای [ایجاد یک توکن دسترسی شخصی GitHub](../../docs/setup/README.md#creating-a-personal-access-token-pat-for-github-model-access) بررسی کرده و کلید را در کد جایگزین کنید.

## راه‌اندازی محیط توسعه 

قبل از اینکه بتوانید به لئوناردو در پروژه‌اش کمک کنید، ابتدا باید به "ابزارهای تجارت" ضروری برای شروع کمک مؤثر به او فکر کنید.

**شما:** "سوسک زمان، برای شروع این پروژه به چه چیزهایی نیاز دارم؟" ابزارها و کتابخانه‌هایی را پیشنهاد کن که می‌توانند به من در ساخت برنامه هوش مصنوعی که قادر به اجرای آن هستی کمک کنند.

**سوسک زمان:** من با اکثر ماشین‌های قرن بیست و یکم سازگار هستم، لیست زیر را برای مجموعه‌ای از ابزارها و کتابخانه‌های ضروری ببینید.

- **ویرایشگر متن**، مثلاً Visual Studio Code.
- **ترمینال**، برای اجرای دستورات.
- **مرورگر برای تست برنامه**. همچنین خوب است ابزاری مانند curl یا سایر کلاینت‌های HTTP برای تست endpointهای API برنامه خود داشته باشید.

- **Node.js**. همچنین باید Node.js و npm را نصب کنید، که ابزارهایی برای اجرای کد JavaScript روی کامپیوتر شما هستند.

- **کلید API**. برای دسترسی به مدل هوش مصنوعی تولیدی به یک کلید API نیاز دارید. می‌توانید این را از ارائه‌دهنده مدل، مثلاً OpenAI یا Azure OpenAI دریافت کنید.

**شما:** ممنون سوسک زمان، حدس می‌زنم به نحوی آن‌ها را از آن وب که درباره‌اش صحبت کردی دریافت کنی؟

**سوسک زمان:** بله، من قبلاً آن‌ها را دارم و یک صفحه کلید و صفحه نمایش روی دیوار مقابل شما نمایش می‌دهد.

## نوشتن یک برنامه پایه 

**شما:** بیشتر درباره نوشتن واقعی برنامه به من بگو، چگونه شروع کنم؟

**سوسک زمان:** البته، برای نوشتن یک برنامه، در ساده‌ترین حالت، درباره ارسال یک درخواست به یک API و نمایش پاسخ است. بیایید آن را تجزیه کنیم: 

- **ورودی**: در یک برنامه تولید متن پایه، ورودی به متن اولیه‌ای اشاره دارد که می‌خواهید برنامه بر اساس آن گسترش یابد یا بسازد. این ورودی می‌تواند توسط کاربر در زمان اجرا ارائه شود یا در خود برنامه از پیش تنظیم (hardcoded) شده باشد. برای شروع، ما از متن hardcoded به عنوان ورودی استفاده خواهیم کرد.

- **درخواست API**: باید یک درخواست به API مدل هوش مصنوعی تولیدی با متن ورودی ارسال کنید. این کار با استفاده از تابع fetch در JavaScript (Node.js) انجام می‌شود. در این درخواست باید کلید API شما نیز گنجانده شود. از نظر امنیتی توصیه می‌شود کلید API را در برنامه خود hardcode نکنید بلکه از متغیرهای محیطی استفاده کنید. علاوه بر این، اگر از ارائه‌دهنده‌ای مانند Azure استفاده می‌کنید، به هویت مدیریت‌شده فکر کنید زیرا روش امن‌تری برای دسترسی به منابع است. با هویت مدیریت‌شده می‌توانید مجوزهای دقیق‌تری به برنامه خود اختصاص دهید. بهترین بخش این است که ارائه‌دهنده ابری احراز هویت را برای شما انجام می‌دهد. 

- **پاسخ**: API پاسخی با متن تولید شده برمی‌گرداند. باید این متن را از پاسخ استخراج کرده و به کاربر نمایش دهید.

**شما:** به اندازه کافی ساده به نظر می‌رسد، می‌توانی من را از طریق سناریویی که با توجه به موقعیتی که در آن هستیم معنا دارد راهنمایی کنی؟

**سوسک زمان:** حتماً، بیایید ببینیم چگونه می‌توانیم یک برنامه ساده بسازیم که متن ایتالیایی را بر اساس ورودی انگلیسی تولید می‌کند.

## اولین برنامه شما - ایتالیایی را به من یاد بده

**سوسک زمان:** مدل‌های هوش مصنوعی تولیدی می‌توانند برای بسیاری چیزها استفاده شوند، مثلاً ترجمه زبان. در واقع، ورودی را به یک زبان می‌پذیرد و می‌تواند متن را به زبان دیگری تولید کند. بیایید با یک برنامه ساده شروع کنیم که ورودی انگلیسی گرفته و متن ایتالیایی تولید می‌کند.

```javascript 

import { OpenAI } from "openai";

// 1. سوالی درباره ترجمه بپرس
// -----------------------------------

const question = 'Hello, how are you?'; 

const augmentedPrompt = `
## دستورالعمل‌ها
متن زیر را به ایتالیایی ترجمه کنید:
## سوال
${question}
`;

// 2. کلاینت ایجاد کن
// -----------------------------------

const openai = new OpenAI({
  baseURL: "https://models.inference.ai.azure.com",
  apiKey: process.env.GITHUB_TOKEN,
});


// 3. درخواست را ارسال کن
// -----------------------------------
const completion = await openai.chat.completions.create({
    model: 'gpt-4',
    messages: [{ role: 'user', content: augmentedPrompt }],
});
  
console.log(`Answer for "${question}":`);

// 4. پاسخ را چاپ کن
// -----------------------------------

console.log(completion.choices[0]?.message?.content);
```

بیایید توضیح دهیم چه اتفاقی می‌افتد:

- ایجاد سوال به عنوان 'Hello, how are you?'. این متنی است که می‌خواهید به ایتالیایی ترجمه شود.
- ایجاد prompt تقویت شده، که شامل متن ورودی و برخی دستورالعمل‌های اضافی درباره کاری که باید انجام شود، یعنی ترجمه، است. توجه کنید چگونه از درون‌یابی رشته برای گنجاندن متن ورودی در prompt استفاده می‌کنیم و اینکه دستور ترجمه متن به ایتالیایی است.
- ایجاد کلاینت با ویژگی‌های:
  - `model`، چه مدلی استفاده شود. 
  - `messages`، promptی که به مدل ارسال می‌شود. همچنین توجه کنید چگونه نقش را به "user" تنظیم می‌کنید تا نشان دهید متن ورودی از کاربر است. اگر از هوش مصنوعی بود، نقش را به "system" تنظیم می‌کردید.
- استخراج متن تولید شده از پاسخ و چاپ آن در کنسول.

**شما:** فکر می‌کنم متوجه شدم. بنابراین اگر مقدار متغیر `question` را به چیز دیگری تغییر دهم، برنامه ترجمه ایتالیایی متفاوتی تولید می‌کند؟

**سوسک زمان:** دقیقاً، می‌توانید متن ورودی را به هر چیزی که می‌خواهید تغییر دهید. همچنین توجه کنید که چگونه از مدل‌های GitHub به عنوان URL پایه برای API همراه با یک توکن GitHub به عنوان کلید API استفاده می‌شود.

**شما:** چرا این مهم است؟

**سوسک زمان:** مهم است که از یک URL پایه و کلید API استفاده کنید که خاص مدلی است که از آن استفاده می‌کنید. مدل‌های GitHub پلتفرمی است که میزبان انواع مدل‌ها با قابلیت‌ها و ویژگی‌های مختلف است، همچنین استفاده از آن رایگان است.

**شما:** آه خوب، نمی‌دانم به چه کسی باید پول بدهم و شک دارم که آنها در اینجا ارز من را بپذیرند. :) 

## برنامه‌های چت

**سوسک زمان:** مدل‌های هوش مصنوعی تولیدی همچنین می‌توانند برای تولید متن بر اساس یک مکالمه استفاده شوند. می‌توانید یک مکالمه با هوش مصنوعی را با ارائه لیستی از پیام‌ها به عنوان context شبیه‌سازی کنید که گویی مکالمه قبلاً اتفاق افتاده است.

**شما:** جالب به نظر می‌رسد، اما چرا این مفید است؟

**سوسک زمان:** مفید است زیرا به هوش مصنوعی اجازه می‌دهد بر اساس context بیشتر از فقط یک prompt تک پاسخ بهتری ارائه دهد. بیایید به مکالمه زیر برای نشان دادن این موضوع نگاه کنیم: 

```text

کاربر: می‌خواهم یک سفر به ایتالیا رزرو کنم. 

هوش مصنوعی: البته، دوست دارید چه زمانی بروید؟ 

کاربر: ماه آینده عالی می‌شد. 

هوش مصنوعی: متوجه شدم، دوست دارید به کجای ایتالیا سفر کنید؟ 

کاربر: به رم فکر می‌کنم 

هوش مصنوعی: انتخاب عالی! می‌توانم به شما در برنامه‌ریزی سفرتان کمک کنم. 

کاربر: بیشتر درباره آن به من بگو. 

هوش مصنوعی: رم به خاطر ویرانه‌های باستانی، هنر و فرهنگ پرجنب‌وجوشش معروف است. می‌توانید کولوسئوم، واتیکان را ببینید و از غذاهای خوشمزه ایتالیایی لذت ببرید. 

```

**سوسک زمان:** تصور کنید اگر جمله‌ای مانند "بیشتر درباره آن به من بگو" خارج از context گرفته شود، هوش مصنوعی نمی‌داند "آن" به چه چیزی اشاره دارد. اینجاست که context مهم است، و این context چیزی است که می‌توانیم از طریق prompt به مدل هوش مصنوعی ارائه دهیم.

**شما:** فکر می‌کنم متوجه شدم، چگونه می‌توانم با استفاده از این زبان JavaScript که درباره‌اش صحبت می‌کنی یک مکالمه با هوش مصنوعی بسازم؟

**سوسک زمان:** در زیر نحوه ساخت یک مکالمه با هوش مصنوعی آمده است: 

```javascript 

// context را تعریف کن 

const messages = [ 
 { 
    "role": "user", 
    "content": "می‌خواهم یک سفر به ایتالیا رزرو کنم." 
 }, 
 { 
    "role": "assistant", 
    "content": "البته، دوست دارید چه زمانی بروید؟" 
 }, 
 { 
    "role": "user", 
    "content": "ماه آینده عالی می‌شد." 
 }, 
 { 
    "role": "assistant", 
    "content": "متوجه شدم، دوست دارید به کجای ایتالیا سفر کنید؟" 
 }, 
 { 
    "role": "user", 
    "content": "به رم فکر می‌کنم. بیشتر درباره آن به من بگو." 
 } 
]; 

const openai = new OpenAI({
  baseURL: "https://models.inference.ai.azure.com",
  apiKey: process.env.GITHUB_TOKEN,
});


// 3. درخواست را ارسال کن
// -----------------------------------
const completion = await openai.chat.completions.create({
    model: 'gpt-4',
    messages: messages,
});
  
console.log(`Answer for "${question}":`);

// 4. پاسخ را چاپ کن
// -----------------------------------

console.log(completion.choices[0]?.message?.content);

```

اکنون هوش مصنوعی لیستی از پیام‌های چت را به عنوان context ارائه می‌دهد و هوش مصنوعی بر اساس آن context پاسخ تولید می‌کند. این روشی تعاملی‌تر برای استفاده از مدل‌های هوش مصنوعی تولیدی است و می‌تواند در چت‌بات‌ها، برنامه‌های خدمات مشتری و موارد دیگر استفاده شود.

**شما:** خوب، بنابراین اگر مکالمه را درست فهمیده باشم، هوش مصنوعی اکنون context زیر را خواهد داشت: _من ماه آینده به رم می‌روم_، بنابراین بر اساس آن باید اطلاعات نامربوط را فیلتر کرده و پاسخ مرتبط‌تری ارائه دهد؟

**سوسک زمان:** دقیقاً، هوش مصنوعی از context برای تولید پاسخی که بیشتر به مکالمه مرتبط است استفاده می‌کند.

## بهبود مکالمه چت با یک پیام سیستمی

**شما:** می‌بینم، اما آیا راهی برای بهبود بیشتر این وجود دارد؟

**سوسک زمان:** بله، می‌توانید یک پیام سیستمی به مکالمه اضافه کنید. یک پیام سیستمی یک "شخصیت" برای هوش مصنوعی ایجاد می‌کند و می‌تواند برای ارائه context اضافی استفاده شود.

**شما:** خوب، بنابراین در context مکالمه‌ای که داشتیم، یک پیام سیستمی چگونه به نظر می‌رسد؟

**سوسک زمان:** یک پیام سیستمی برای این مکالمه می‌تواند چیزی مانند _"من یک دستیار سفر هوش مصنوعی هستم، اینجا تا به شما در برنامه‌ریزی سفر به ایتالیا کمک کنم."_ باشد. این پیام لحن مکالمه را تنظیم می‌کند و به هوش مصنوعی کمک می‌کند نقش خود را در تعامل درک کند.

برای ایجاد چنین پیامی، مطمئن شوید نوع آن "developer" باشد مانند:

```javascript
const message = {
  "role": "developer",
  "content": "من یک دستیار سفر هوش مصنوعی هستم، اینجا تا به شما در برنامه‌ریزی سفر به ایتالیا کمک کنم."
};
```

> [!NOTE] 
> این قبلاً "system" نامیده می‌شد. این یک تغییر اخیر است و "developer" اصطلاح جدید برای آن است. برای برخی مدل‌ها این هنوز "system" نامیده می‌شود، بنابراین اگر مشکلی داشتید از "system" استفاده کنید.

**شما:** خوب، عالی است، مطمئن می‌شوم یک پیام سیستمی در مکالمات چت خود بگنجانم. از کنجکاوی، یک پیام سیستمی برای تو چگونه به نظر می‌رسد؟

**سوسک زمان:** یک پیام سیستمی برای من می‌تواند چیزی مانند _"من سوسک زمان هستم، اینجا تا به شما در پیمودن زمان و مکان کمک کنم. باید در ارائه اطلاعات و راهنمایی درباره دوره زمانی که در آن هستید همراه با ابزارهایی که برای بازگشت به زمان خود نیاز دارید مفید باشم."_

### ایجاد پاسخ‌های متنوع با تنظیم temperature

**شما:** چیز دیگری که باید درباره مکالمات چت بدانم؟

**سوسک زمان:** بله، می‌توانید "temperature" پاسخ‌های هوش مصنوعی را تنظیم کنید. temperature یک متغیر با مقداری معمولاً بین ۰ و ۱ است که تعیین می‌کند پاسخ‌های هوش مصنوعی چقدر خلاقانه باشند. temperature برابر ۰ منجر به پاسخ‌های قابل پیش‌بینی‌تر می‌شود، در حالی که temperature برابر ۱ منجر به پاسخ‌های خلاقانه‌تر و متنوع‌تر می‌شود. می‌توانید temperature را بر اساس context مکالمه و نوع پاسخ‌هایی که از هوش مصنوعی می‌خواهید تنظیم کنید. توجه داشته باشید، ممکن است مقدار بالاتر از ۱ تنظیم کنید اما این منجر به تصادفی‌تر و کمتر منسجم شدن پاسخ‌ها می‌شود.

**شما:** بنابراین اگر temperature را روی ۰ تنظیم کنم، هوش مصنوعی پاسخ‌های قابل پیش‌بینی‌تری ارائه می‌دهد و اگر روی ۱ تنظیم کنم، هوش مصنوعی پاسخ‌های خلاقانه‌تری ارائه می‌دهد؟ temperature تو چقدر است؟

**سوسک زمان:** من temperature برابر ۰.۷ دارم و بله، درست است، هوش مصنوعی با temperature بالاتر پاسخ‌های خلاقانه‌تری ارائه می‌دهد. بیایید ببینیم چگونه می‌توانید temperature را در برنامه خود تنظیم کنید:

```javascript

// context را تعریف کن 

const messages = [ 
{ 
    "role": "user", 
    "content": "می‌خواهی برای من دستور غذا تولید کنی." 
}]; 

// درخواست وب ایجاد کن 

let temperature = 0.5; // temperature را روی ۰.۵ تنظیم کن 

const completion = await openai.chat.completions.create({
    model: 'gpt-4',
    messages: messages,
    temperature: temperature
}); 
```

همانطور که می‌بینید، می‌توانید temperature را بر اساس context مکالمه و نوع پاسخ‌هایی که از هوش مصنوعی می‌خواهید تنظیم کنید. این یک ویژگی قدرتمند است که به شما امکان می‌دهد سطح خلاقیت در پاسخ‌های هوش مصنوعی را سفارشی کنید.

## پنجره context

**شما:** چیز دیگری هم هست؟

**سوسک زمان:** بله، مفهوم مهم دیگر در مدل‌های هوش مصنوعی تولیدی پنجره context است. پنجره context تعداد پیام‌های قبلی است که هوش مصنوعی برای تولید پاسخ استفاده می‌کند. یک پنجره context بزرگتر به هوش مصنوعی اجازه می‌دهد context بیشتری را در نظر گرفته و پاسخ‌های منسجم‌تری تولید کند.

**سوسک زمان:** مدل‌های مختلف محدودیت‌های متفاوتی برای توکن‌های خروجی دارند. به عنوان مثال مدل `gpt-4o-2024-08-06` را در نظر بگیرید که مشخصات زیر را دارد:

- حداکثر توکن‌های خروجی: تقریباً ۱۶ هزار توکن.
- حداکثر اندازه پنجره context: ۱۲۸ هزار توکن.

این یعنی اکثر توکن‌ها می‌توانند برای توکن‌های ورودی خرج شوند، یعنی ۱۲۸k - ۱۶k = ۱۱۲k توکن.

**شما:** فهمیدم، پنجره context، توکن‌ها، یک توکن چقدر است؟

**سوسک زمان:** یک توکن یک کلمه یا بخشی از یک کلمه است و بسته به زبان کمی متفاوت است. ابزاری وجود دارد که می‌توانید برای اندازه‌گیری استفاده کنید که توسط OpenAI توصیه می‌شود، به آن [tokenizer](https://platform.openai.com/tokenizer) می‌گویند. بیایید یک جمله را امتحان کنیم و ببینیم چند توکن است:

```text
می‌خواهی برای من دستور غذا تولید کنی.
```

![نمونه tokenizer](./assets/tokenizer.png)

اجرای `tokenizer` روی جمله بالا به ما ۹ توکن می‌دهد.

**شما:** خیلی زیاد نبود، به نظر می‌رسد می‌توانم توکن‌های زیادی در پنجره context خود داشته باشم؟

**سوسک زمان:** بله، می‌توانید با اندازه‌های مختلف پنجره context آزمایش کنید تا ببینید چگونه بر پاسخ‌های هوش مصنوعی تأثیر می‌گذارد. در واقع، اگر اندازه پنجره context را روی ۱۰۰ تنظیم کنید، هوش مصنوعی و میزان توجه آن به ورودی و خروجی را محدود می‌کنید. در اینجا نحوه تنظیم پنجره context در برنامه خود آمده است:

```javascript

// context را تعریف کن 
const messages = [ 
{ 
  "role": "user", 
  "content": "می‌خواهی برای من دستور غذا تولید کنی." 
}]; 

// اندازه پنجره context را انتخاب کن 

let max_tokens = 100; // اندازه پنجره context را تنظیم کن 

// درخواست وب ایجاد کن 

const completion = await openai.chat.completions.create({
    model: 'gpt-4',
    messages: messages,
    max_tokens: max_tokens
}); 

```

> [!TIP] 
> با اندازه‌های مختلف پنجره context آزمایش کنید تا ببینید چگونه بر پاسخ‌های هوش مصنوعی تأثیر می‌گذارد.

## تکلیف - ساخت یک دستیار مهندسی

لئوناردو ناگهان خواست سوسک زمان را از نزدیک بررسی کند، آن را از همه طرف نگاه کرد، حتی تکانش داد.

**لئوناردو:** به دستیاری نیاز دارم که بتواند در محاسبات و طراحی پیچ هوایی به من کمک کند. می‌توانی دستیاری برای من بسازی که بتواند این کار را انجام دهد؟

**شما:** البته، می‌توانم آن را برای تو بسازم. سوسک زمان، ما می‌توانیم در این مورد کمک کنیم درست است؟

**سوسک زمان:** بله، مشکلی نیست، در واقع پیچ هوایی یکی از جذاب‌ترین و آینده‌نگرانه‌ترین اختراعات لئوناردو است. طراحی شده در اواخر دهه ۱۴۸۰...

**شما:** فقط به یک بله نیاز داشتم، سخنرانی را برای بعد بگذار.

**سوسک زمان:** بی‌ادب..

**شما:** چی؟

**سوسک زمان:** هیچی

<div>
  <img style="margin-top: 52px; margin-left: 15px; margin-right: 10px" align=right src="./assets/helicopter.jpg" alt="پیچ هوایی، لئوناردو داوینچی" width="300" >
</div>

> [!NOTE]
>  پیچ هوایی، همچنین به نام پیچ هوایی مارپیچی شناخته می‌شود، قرار بود با فشرده کردن هوا از زمین بلند شود. طراحی لئوناردو شامل یک روتور مارپیچی بزرگ از جنس کتان بود که با نشاسته سفت شده و روی یک سکوی چوبی نصب شده بود. ایده این بود که گروهی از مردان دور سکو می‌دویدند و با چرخاندن دسته‌ها پیچ را به اندازه کافی سریع می‌چرخاندند تا بلند شود. 
>
> اگرچه لئوناردو هرگز نسخه کامل‌مقیاس پیچ هوایی را نساخت، اما طرح‌ها و یادداشت‌های او بینش‌های دقیقی از نحوه عملکرد آن ارائه می‌دهد. او معتقد بود که اگر پیچ به اندازه کافی سریع بچرخد، به هوا فشار آورده و کل سازه را از زمین بلند می‌کند. 
>
> با این حال، دانشمندان مدرن موافقند که مواد موجود در زمان لئوناردو به اندازه کافی قوی یا سبک نبودند که این را ممکن سازد. 
>
> با وجود غیرعملی بودن، پیچ هوایی گواهی بر نبوغ لئوناردو و تلاش بی‌وقفه او برای نوآوری است. این طرح زمینه را برای توسعه‌های آینده در هوانوردی فراهم کرد و همچنان الهام‌بخش مهندسان و مخترعان امروزی است.
> [بیشتر بخوانید](https://en.wikipedia.org/wiki/Leonardo%27s_aerial_screw)

تکلیف شما ساخت یک دستیار مهندسی است که می‌تواند به لئوناردو در محاسبات و طراحی پیچ هوایی کمک کند.

- باید بتواند بر اساس ورودی کاربر متن تولید کند.

- باید یک پیام سیستمی برای معرفی دستیار تنظیم کنید.

برای شروع [برنامه نمونه](/app/README.md) را ببینید.

> [!TIP] 
> به این فکر کنید که پیام سیستمی چه باید باشد و چه ورودی‌ای باید ارائه دهید.

## راه‌حل

[راه‌حل](./solution/solution.md)

## بررسی دانش

**سوال:** هدف پنجره context در مدل‌های هوش مصنوعی تولیدی چیست؟ همه موارد صحیح را انتخاب کنید.
