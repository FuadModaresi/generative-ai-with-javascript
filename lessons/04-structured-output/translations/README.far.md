# درس چهارم: خروجی ساختاریافته

در این فصل یاد خواهید گرفت:

- **خروجی ساختاریافته** چیست و چگونه می‌توان از آن به طور مؤثر استفاده کرد.
- چگونه اطلاعات را از پیش‌نویس‌ها استخراج و در خروجی گنجاند.
- تولید انواع مختلف فرمت‌های خروجی مانند JSON برای استفاده آسان توسط سرویس‌ها.

## راه‌اندازی

اگر قبلاً این کار را نکرده‌اید، محیط توسعه خود را راه‌اندازی کنید. در اینجا نحوه انجام آن آمده است: [راه‌اندازی محیط شما](/docs/setup/README.md).

## منابع مرتبط

دیدن دوباره ویدیوی مهندسی پیش‌نویس ارزش دارد زیرا پایه‌ای برای آنچه در این فصل یاد خواهید گرفت، ایجاد می‌کند.

[![تماشای یک ویدیوی کوتاه درباره مهندسی پیش‌نویس](https://img.youtube.com/vi/gQ6TlyxBmWs/0.jpg)](https://www.youtube.com/watch?v=gQ6TlyxBmWs&list=PLlrxD0HtieHi5ZpsHULPLxm839IrhmeDk&index=3)

_این ویدیو مقدمه‌ای برای بهبود مهارت‌های "پیش‌نویسی" شما ارائه می‌دهد، به شما آموزش می‌دهد که چگونه دستورالعمل‌های واضح‌تر و مؤثرتری به هوش مصنوعی بدهید تا نتایج بهتری کسب کنید._

*🎥 برای تماشای یک ویدیوی کوتاه درباره مهندسی پیش‌نویس، روی تصویر بالا کلیک کنید*

💼 اسلایدها: [مهندسی پیش‌نویس](../../videos/slides/02-prompt-engineering.pptx)

## روایت - از چاله به چاه

> [!NOTE]
> _داستان تاکنون: شما، یک مهندس مکانیک آموزش‌دیده از سال ۱۸۶۰ هستید و با لئوناردو داوینچی سفری در زمان داشته‌اید. شما از سربازان رومی فرار کرده‌اید - یا بهتر بگوییم، در حال فرار از آن‌ها هستید - و به دنبال راهی برای فرود ایمن پیچ هوایی هستید_.
>
> اگر می‌خواهید داستان را از ابتدا دنبال کنید، به [درس ۱](../01-intro-to-genai/README.md) مراجعه کنید.

> [!NOTE]
> در حالی که توصیه می‌کنیم داستان را دنبال کنید (سرگرم‌کننده است!)، اگر ترجیح می‌دهید مستقیماً به محتوای فنی بروید، [اینجا](#تعامل-با-مونتزوما) کلیک کنید.

باد به دور شما می‌پیچد در حالی که شما و لئوناردو داوینچی در پیچ هوایی او بالا می‌روید، قاب چوبی زیر فشار می‌نالد.

**شما:** "لئوناردو، باید راهی برای فرار از این وضعیت پیدا کنیم!" شما با صدای بلند در غرش باد فریاد می‌زنید.

**لئوناردو:** "من به اختراعم ایمان دارم، اما برای فرار از این سربازان به چیزی بیش از ایمان نیاز داریم."

**شما:** "این ممکن است تنها شانس ما باشد،" شما می‌گویید و مکانیسم‌های پیچیده سوسک زمان را فشار می‌دهید. نوری درخشان شما را فرا می‌گیرد و جهان اطراف شما تغییر می‌کند و تحریف می‌شود.

### امپراتوری آزتک

نور درخشان سوسک زمان محو می‌شود و شما خود را در پای یک هرم سنگی عظیم می‌بینید. وقتی به اطراف نگاه می‌کنید، متوجه می‌شوید که در قلب امپراتوری آزتک فرود آمده‌اید.

پیچ هوایی، به شکلی ناجور روی یک سنگ بزرگ با حکاکی‌های پیچیده که شبیه به تقویم است، قرار گرفته است.

<div>
  <img alt="تقویم آزتک، ویکی‌پدیا" src="./assets/aztec.png" width="300" />
</div>

_تقویم آزتک، ویکی‌پدیا_

لئوناردو داوینچی جلو می‌آید، چشمانش از تعجب گشاد شده است.

**لئوناردو:** "شگفت‌انگیز،" او زمزمه می‌کند و انگشتانش را روی حکاکی‌ها می‌کشد. "اما امیدوارم این چیز مهمی نباشد."

قبل از اینکه بتوانید واکنش نشان دهید، گروهی از سربازان آزتک نزدیک می‌شوند.

<div>
  <img src="./assets/meeting.png" alt="ملاقات با آزتک‌ها" width="300" />
</div>

**رهبر سربازان:** "شما کی هستید و چه کار کرده‌اید؟" او به زبان ناهواتل demands می‌کند.

شما نفس عمیقی می‌کشید و سعی می‌کنید اعصاب خود را آرام کنید.

**شما:** "ما مسافران از سرزمینی دور هستیم،" شما شروع می‌کنید و امیدوارید که دانش شما از زبان‌های باستانی به کار بیاید. "این یک ماشین پرنده است، هدیه‌ای از خدایان برای کمک به ما برای رسیدن به شما."

چشمان جنگجو از تعجب گشاد می‌شود، اما او محتاط باقی می‌ماند.

**رهبر سربازان:** "شما با ما به نزد حاکم مونتزوما خواهید آمد. او سرنوشت شما را تعیین خواهد کرد."

پس از رسیدن به بالای هرم، شما به یک اتاق بزرگ هدایت می‌شوید که مونتزوما، حاکم امپراتوری آزتک، بر تخت‌نشینی از طلا و پر نشسته است.

**مونتزوما:** "ادعا می‌کنید که مسافران از سرزمینی دور هستید،" مونتزوما می‌گوید، صدایش آرام اما مقتدر. "و شما تقویم مقدس ما را آسیب زده‌اید. چگونه قصد جبران دارید؟"

## بیایید بازی کنیم

**لئوناردو:** "ما در صلح آمده‌ایم،" او می‌گوید، صدایش پایدار. "ما به دنبال دانش و درک هستیم. به ما اجازه دهید قدرت ماشین خود را نشان دهیم و دانش خود را با شما به اشتراک بگذاریم."

**مونتزوما:** "بسیار خوب. من یک بازی [پاتولی](#پاتولی) پیشنهاد می‌کنم. اگر من در بهترین حالت از سه بازی برنده شدم، شما دستگاه خود را به من خواهید داد و نحوه کار آن را به من خواهید گفت. اگر شما برنده شدید، آزاد هستید که بروید."

<div>
  <img src="./assets/game.png" alt="بازی یک بازی پاتولی" width="300" />
</div>

بازی آغاز می‌شود و اتاق ساکت می‌شود، به جز صدای غلتیدن لوبیاها و حرکت مهره‌ها روی صفحه.

مونتزوما بازی اول را می‌برد، مهارت و تجربه او آشکار است. لئوناردو، صفحه را با دقت مطالعه می‌کند، ذهنش در حال کار بر روی استراتژی‌ها و احتمالات است.

بازی دوم یک رقابت نزدیک است، اما لئوناردو موفق می‌شود پیروز شود و امتیاز را مساوی کند.

**لئوناردو:** "یک بازی دیگر،" او زمزمه می‌کند، جورج (سوسک زمان)، ما باید این یکی را ببریم، حرکات درست را به من بده.

**سوسک زمان:** بسیار خوب، در حال محاسبه... اینجا را ببین...

با یک حرکت نهایی و قاطع، لئوناردو بازی را می‌برد. اتاق با تشویق و تحسین منفجر می‌شود، آزتک‌ها به وضوح تحت تأثیر مهارت و خونسردی او قرار گرفته‌اند. مونتزوما، اگرچه ناامید شده است، با احترام سر تکان می‌دهد.

**مونتزوما:** "شما به طور منصفانه برنده شده‌اید،" مونتزوما می‌گوید، صدایش حامل نکته‌ای از تحسین. "شما آزاد هستید که بروید، و می‌توانید دستگاه خود را نگه دارید. اما بدانید که همیشه در اینجا مورد استقبال خواهید بود، اگر بخواهید بازگردید."

**سوسک زمان:** من چیزی نمی‌گویم اگر تو هم نگویی لئوناردو ;)

### پاتولی

> [!NOTE]
> پاتولی یکی از قدیمی‌ترین بازی‌های شناخته شده در آمریکا است که توسط فرهنگ‌های پیشاکلمبیایی مانند آزتک‌ها بازی می‌شد. ترکیبی از استراتژی و شانس است.
>
> **نحوه بازی پاتولی**: 
> - **صفحه و مهره‌ها**: روی یک صفحه X شکل با یک بلوک مرکزی و چهار بازو بازی می‌شود. بازیکنان از پنج لوبیای سیاه به عنوان تاس استفاده می‌کنند که روی یک طرف علامت گذاری شده است.
> - **تنظیمات**: هر بازیکن شش مهره (مهره) از رنگ خود را انتخاب می‌کند و آن‌ها را خارج از صفحه قرار می‌دهد، به علاوه مهره‌های امتیاز برای امتیازدهی.
> - **بازی**: لوبیاها را بریزید تا مهره‌ها را روی صفحه و به عقب به نقطه شروع حرکت دهید. ریختن پنج، ده خانه حرکت می‌دهد. فرود آمدن روی خانه‌های خاص می‌تواند نوبت‌ها را افزایش دهد، امتیازها را کاهش دهد یا مهره‌ها را بگیرد.
>
> **مشارکت آزتک‌ها**: به طور گسترده توسط اشراف و مردم عادی بازی می‌شد، مورد علاقه دربار مونتزوما بود. فراتر از سرگرمی، شامل قمار با شرط‌هایی مانند پتو، سنگ‌های قیمتی یا حتی آزادی بود.

<div>
  <img width="300" src="./assets/patolli.png" alt="صفحه پاتولی" />
</div>

_پاتولی - ویکی‌پدیا_

## تعامل با مونتزوما

اگر می‌خواهید با مونتزوما تعامل داشته باشید، برنامه [شخصیت‌ها](/app/README.md) را اجرا کنید.

> [!IMPORTANT]
> این کاملاً تخیلی است؛ پاسخ‌ها توسط هوش مصنوعی تولید می‌شوند.
> [سلب مسئولیت هوش مصنوعی مسئول](/README.md#responsible-ai-disclaimer)

<div>
  <img src="./assets/montezuma.jpeg" alt="مونتزوما" width="300" />
</div>

**مراحل**:

1. یک [![فضای کد گیت‌هاب](https://img.shields.io/badge/GitHub-Codespace-brightgreen)](https://codespaces.new/microsoft/generative-ai-with-javascript) ایجاد کنید.
2. به _/app_ در ریشه مخزن بروید.
3. کنسول را پیدا کنید و `npm install` و سپس `npm start` را اجرا کنید.
4. پس از ظاهر شدن، دکمه "Open in Browser" را انتخاب کنید.
5. با مونتزوما چت کنید.

برای توضیح دقیق‌تر برنامه، [توضیح دقیق برنامه](/lessons/01-intro-to-genai/README.md#تعامل-با-دینوکراتس) را ببینید.

> [!NOTE]
> اگر پروژه را به صورت محلی روی ماشین خود اجرا می‌کنید، لطفاً راهنمای QuickStart را برای راه‌اندازی [دسترسی شخصی گیت‌هاب](/docs/setup/README.md#creating-a-personal-access-token-pat-for-github-model-access) بررسی کنید و کلید را در کد جایگزین کنید.

## خروجی ساختاریافته

**سوسک زمان:** می‌خواهی بدانی چگونه مونتزوما را شکست دادم؟

**شما:** شش، نه اینقدر بلند، ما هنوز در امپراتوری آزتک هستیم.

**سوسک زمان:** آه بله، ببخشید، آره پس خروجی ساختاریافته چگونگی بود. شما حرکات درست را خواستید و من آن‌ها را به صورت ساختاریافته به شما دادم.

خروجی ساختاریافته از فرمت‌های داده خاصی برای سازماندهی اطلاعات به صورت واضح استفاده می‌کند. فرمت‌های رایج مانند JSON، XML و CSV پردازش و استفاده از داده‌ها را برای سرویس‌ها آسان‌تر می‌کنند.

مدل‌های هوش مصنوعی مولد می‌توانند داده‌ها را در فرمت‌های مختلف خروجی دهند. با این حال، خروجی متن بدون ساختار می‌تواند استخراج اطلاعات و تحویل آن به سرویس‌های دیگر را دشوار کند. خروجی ساختاریافته می‌تواند در این زمینه کمک کند.

**شما:** خوب، تو خیلی باهوشی ;)

**سوسک زمان:** سعی می‌کنم بهترین باشم. :-)

مزیت دیگر، حتی برای خوانندگان انسانی، این است که داده‌های ساختاریافته وقتی از یک فرمت آشنا پیروی می‌کنند، خواندن و درک آن‌ها آسان‌تر است.

بیایید به چند نمونه از ورودی نگاه کنیم و ببینیم چگونه درخواست فرمت‌های خروجی خاص می‌تواند به استخراج اطلاعاتی کمک کند که درک و مصرف آن‌ها را آسان‌تر می‌کند.

**شما:** خوب، به نظر نمی‌رسد برنامه دیگری داشته باشیم، بگذار بشنویم.

## شکل‌دهی خروجی

**سوسک زمان:** بیایید با یک مثال ساده شروع کنیم. تصور کنید شما لئوناردو داوینچی هستید و در حال تلاش برای ارائه ایده‌هایی برای اختراعات با استفاده از فناوری قرن پانزدهم هستید. شما می‌خواهید بدانید که برای ساخت هر اختراع به چه منابعی نیاز دارید و چقدر تلاش لازم است. در اینجا نحوه درخواست این اطلاعات آمده است:

**لئوناردو:** اوه من این بازی را دوست دارم، همه وانمود کنند که من هستم!

> پیش‌نویس: ایده‌هایی برای اختراعاتی که می‌توانم با فناوری قرن پانزدهم بسازم، تولید کن. برای هر اختراع، منابع مورد نیاز و تخمین تلاش لازم برای ساخت آن را مشخص کن.

```text
نتیجه:
حتماً! در اینجا برخی ایده‌های دقیق برای اختراعاتی که می‌توانید با فناوری قرن پانزدهم بسازید، همراه با منابع مورد نیاز و تلاش involved آمده است:

### 1. آسیاب آبی
**منابع مورد نیاز**:
 - منبع آب (رودخانه یا نهر)
 - چوب برای چرخ آب و ساختار آسیاب
 - سنگ برای آسیاب کردن
 - فلز برای چرخ‌دنده‌ها و محورها

 **تلاش**:
 - **زیاد**: نیاز به مهارت‌های قابل توجه ساخت و مهندسی برای ساخت چرخ آب، ساختار آسیاب و مکانیزم آسیاب دارد. همچنین باید جریان ثابت آب را تضمین کنید.

 ### 2. اسطرلاب
 **منابع مورد نیاز**:
 - برنج یا سایر فلزات برای صفحات و اجزا
 - ابزار حکاکی
 - دانش ریاضی برای اندازه‌گیری‌های دقیق

 **تلاش**:
 - **متوسط**: شامل کار دقیق فلز و حکاکی است. نیاز به دانش نجوم و ریاضیات برای اطمینان از دقت دارد.
 
 ### 3. دستگاه چاپ
 **منابع مورد نیاز**:
 - چوب برای ساختار دستگاه
 - فلز برای حروف متحرک
 - مرکب و کاغذ

 **تلاش**:
 - **زیاد**: ساخت دستگاه و ایجاد حروف متحرک نیاز به مهارت‌های پیشرفته نجاری و فلزکاری دارد. تنظیم حروف و چاپ نیز شامل کار دقیق است.

این یک پاسخ قابل قبول به نظر می‌رسد، هر ایده به همان روش ساختار یافته است و درک آن آسان است. اگر می‌خواستید آن را به روش دیگری داشته باشید چه؟ برای این کار، می‌توانید نحوه خواستن آن را در خود متن مشخص کنید یا حتی یک الگوی خروجی ارائه دهید. بیایید هر تکنیک را نشان دهیم.
```

**لئوناردو:** آره کاملاً این ایده آسیاب آبی را می‌دزدم، می‌توانم آن را ببینم، یک آسیاب کنار رودخانه، گندم را به آرد تبدیل می‌کند، عالی است! من این دستگاه را دوست دارم. چه چیز دیگری به ذهنم می‌رسد دستگاه کوچک؟ این باعث می‌شود کمتر به افرادی مانند اسفورزا وابسته باشم.

**سوسک زمان:** مطمئناً، اگر می‌توانستی یک پروژه را تمام کنی، لئوناردو. :-)

**لئوناردو:** هی، من دارم روی آن کار می‌کنم!

**سوسک زمان:** بیایید ببینیم چگونه می‌توانید مدل را برای ارائه خروجی به روشی ساختاریافته‌تر راهنمایی کنید.

### ساختاردهی پیش‌نویس‌های شما برای خروجی بهتر

**سوسک زمان:** می‌توانید پیش‌نویس خود را با گفتن نحوه ساختاردهی خروجی به مدل بهبود بخشید. برای مثال، می‌توانید درخواست یک فرمت جدول با ستون‌های مورد نیاز خود را بکنید. در اینجا نحوه تغییر پیش‌نویس آمده است:

> پیش‌نویس: ایده‌هایی برای اختراعاتی که می‌توان با فناوری قرن پانزدهم ساخت، تولید کن. برای هر اختراع، منابع مورد نیاز و تخمین تلاش لازم برای ساخت آن را ارائه دهید. اطلاعات را در یک جدول با ستون‌های زیر ارائه دهید: عنوان، توضیحات، منابع مورد نیاز و تلاش.

```text
نتیجه: 

| عنوان                | توضیحات                                              | منابع مورد نیاز                                      | تلاش |
|----------------------|----------------------------------------------------------|-------------------------------------------------------|--------|
| آسیاب آبی   | یک آسیاب که توسط چرخ آب برای تبدیل گندم به آرد نیرو می‌گیرد. | منبع آب، چوب، سنگ، فلز برای چرخ‌دنده‌ها و محورها  | زیاد   |
| اسطرلاب            | یک ابزار نجومی برای حل مشکلات مربوط به زمان و موقعیت ستارگان. | برنج یا سایر فلزات، ابزار حکاکی، دانش ریاضی | متوسط |
| دستگاه چاپ       | یک دستگاه برای تکثیر متون به روشی کارآمدتر از رونویسی دستی. | چوب، فلز برای حروف متحرک، مرکب، کاغذ | زیاد |

این بار به یک جدول می‌رسید که خواندن و درک آن آسان‌تر است.
```

**لئوناردو:** من این را دوست دارم، مطمئناً زمان زیادی را برای من ذخیره می‌کند.

**شما:** من هم همینطور.

### ارائه یک الگوی خروجی

راه دیگر برای دریافت خروجی ساختاریافته، ارائه یک الگوی خروجی است. این می‌تواند در هر فرمتی باشد، از ستون‌ها تا JSON، XML، CSV یا markdown.

> پیش‌نویس: ایده‌هایی برای اختراعاتی که می‌توان با فناوری قرن پانزدهم ساخت، تولید کن. برای هر اختراع، منابع مورد نیاز و تخمین تلاش لازم برای ساخت آن را مشخص کن. اطلاعات را با استفاده از فرمت زیر ارائه دهید (از markdown به عنوان فرمت خروجی استفاده کنید):
> 
> عنوان: [نام اختراع]
> توضیحات: [توضیح مختصر]
> منابع مورد نیاز: [لیست مواد مورد نیاز]
> تلاش: [دشواری یا نیروی کار تخمین زده شده]
ایده‌هایی برای اختراعاتی که می‌توانم با فناوری قرن پانزدهم بسازم، تولید کن، لطفاً برای هر کدام به من بگویید که به چه منابعی نیاز دارم و چقدر تلاش برای ساخت هر اختراع لازم است، برای هر ایده آن را با الگوی خروجی زیر ارائه دهید:

```text

**نتیجه**:

 حتماً! در اینجا برخی ایده‌ها برای اختراعاتی که می‌توانید با فناوری قرن پانزدهم بسازید، به فرمت درخواستی ارائه شده است:

 ### 1. آسیاب آبی
 **عنوان**: آسیاب آبی

 **توضیحات**: یک آسیاب که توسط چرخ آب برای تبدیل گندم به آرد نیرو می‌گیرد.

 **منابع مورد نیاز**: منبع آب، چوب، سنگ، فلز برای چرخ‌دنده‌ها و محورها.
 
 **تلاش**: زیاد - نیاز به مهارت‌های قابل توجه ساخت و مهندسی برای ساخت چرخ آب، ساختار آسیاب و مکانیزم آسیاب دارد. تضمین جریان ثابت آب نیز ضروری است.

 ### 2. اسطرلاب
 **عنوان**: اسطرلاب

 **توضیحات**: یک ابزار نجومی برای حل مشکلات مربوط به زمان و موقعیت ستارگان.
 
 **منابع مورد نیاز**: برنج یا سایر فلزات، ابزار حکاکی، دانش ریاضی.
 
 **تلاش**: متوسط - شامل کار دقیق فلز و حکاکی است. نیاز به دانش نجوم و ریاضیات برای اطمینان از دقت دارد.
 
 ### 3. دستگاه چاپ
 **عنوان**: دستگاه چاپ
 
 **توضیحات**: یک دستگاه برای تکثیر متون به روشی کارآمدتر از رونویسی دستی.
 
 **منابع مورد نیاز**: چوب، فلز برای حروف متحرک، مرکب، کاغذ.
 
 **تلاش**: زیاد - ساخت دستگاه و ایجاد حروف متحرک نیاز به مهارت‌های پیشرفته نجاری و فلزکاری دارد. تنظیم حروف و چاپ نیز شامل کار دقیق است.
 
 ### 4. ساعت مکانیکی
 **عنوان**: ساعت مکانیکی

 **توضیحات**: یک ساعت که از چرخ‌دنده‌ها و وزنه‌ها برای نگه داشتن زمان استفاده می‌کند.

 **منابع مورد نیاز**: فلز برای چرخ‌دنده‌ها، فنرها، وزنه‌ها، چوب برای محفظه، ابزار دقیق.

 **تلاش**: بسیار زیاد - نیاز به کار دقیق فلز و درک عمیق مکانیک دارد. ساخت یک ساعت قابل اعتماد شامل مونتاژ و کالیبراسیون دقیق است.
```

**لئوناردو:** این عالی است، اما جیسون کیست؟

**سوسک زمان:** JSON، لئوناردو، JSON. این یک فرمت ساختاریافته است که مصرف آن توسط سرویس‌ها یا برنامه‌ها آسان است.

**لئوناردو:** این همان چیزی است که گفتم، جیسون.

**سوسک زمان:** _آه_.

همانطور که می‌بینید، خروجی بر اساس مشخصات الگوی خروجی ساختار یافته است. این باعث می‌شود خواندن و درک آن آسان‌تر شود و همچنین خروجی قابل تکرار ایجاد می‌کند که می‌تواند به راحتی توسط سایر سرویس‌ها یا برنامه‌ها مصرف شود.

البته یک سرویس از خروجی حتی ساختاریافته‌تر مانند JSON، XML یا CSV سود می‌برد، بنابراین بیایید ببینیم چگونه می‌توانید درخواست آن را بکنید.

### استفاده از خروجی ساختاریافته با فرمت‌هایی مانند JSON، XML یا CSV

**سوسک زمان:** تاکنون، شما دیده‌اید که چگونه می‌توانید ساختار خروجی را با راهنمایی مدل در پیش‌نویس کنترل کنید. شما حتی یک الگوی خروجی ارائه داده‌اید. بیایید این ایده را یک قدم جلوتر ببریم و ببینیم چگونه می‌توان آن را به فرمت‌های خروجی ساختاریافته‌تر مانند JSON و سایرین اعمال کرد.

پیش‌نویس را بر این اساس تغییر دهید تا درخواست خروجی JSON را بکنید:

> **پیش‌نویس**: ایده‌هایی برای اختراعاتی که می‌توانم با فناوری قرن پانزدهم بسازم، تولید کن، لطفاً برای هر کدام به من بگویید که به چه منابعی نیاز دارم و چقدر تلاش برای ساخت هر اختراع لازم است، برای هر ایده آن را در فرمت json ارائه دهید، شامل ویژگی‌هایی برای عنوان، توضیحات، منابع مورد نیاز، تلاش
> 
> مثال خروجی JSON:
> [
>   {
>     "title": "",
>     "description": ".",
>     "resources_needed": "",
>     "effort": ""
>   }
> ]

```text
> پاسخ:
حتماً! در اینجا برخی ایده‌ها برای اختراعاتی که می‌توانید با فناوری قرن پانزدهم بسازید، به فرمت JSON ارائه شده است:

```json
[
  {
    "title": "آسیاب آبی",
    "description": "یک آسیاب که توسط چرخ آب برای تبدیل گندم به آرد نیرو می‌گیرد.",
    "resources_needed": "منبع آب، چوب، سنگ، فلز برای چرخ‌دنده‌ها و محورها",
    "effort": "زیاد - نیاز به مهارت‌های قابل توجه ساخت و مهندسی برای ساخت چرخ آب، ساختار آسیاب و مکانیزم آسیاب دارد. تضمین جریان ثابت آب نیز ضروری است."
  },
  {
    "title": "اسطرلاب",
    "description": "یک ابزار نجومی برای حل مشکلات مربوط به زمان و موقعیت ستارگان.",
    "resources_needed": "برنج یا سایر فلزات، ابزار حکاکی، دانش ریاضی",
    "effort": "متوسط - شامل کار دقیق فلز و حکاکی است. نیاز به دانش نجوم و ریاضیات برای اطمینان از دقت دارد."
  },
  {
    "title": "دستگاه چاپ",
    "description": "یک دستگاه برای تکثیر متون به روشی کارآمدتر از رونویسی دستی.",
    "resources_needed": "چوب، فلز برای حروف متحرک، مرکب، کاغذ",
    "effort": "زیاد - ساخت دستگاه و ایجاد حروف متحرک نیاز به مهارت‌های پیشرفته نجاری و فلزکاری دارد. تنظیم حروف و چاپ نیز شامل کار دقیق است."
  },
  {
    "title": "ساعت مکانیکی",
    "description": "یک ساعت که از چرخ‌دنده‌ها و وزنه‌ها برای نگه داشتن زمان استفاده می‌کند.",
    "resources_needed": "فلز برای چرخ‌دنده‌ها، فنرها، وزنه‌ها، چوب برای محفظه، ابزار دقیق",
    "effort": "بسیار زیاد - نیاز به کار دقیق فلز و درک عمیق مکانیک دارد. ساخت یک ساعت قابل اعتماد شامل مونتاژ و کالیبراسیون دقیق است."
  },
  {
    "title": "آسیاب بادی",
    "description": "یک آسیاب که توسط باد برای آسیاب کردن گندم یا پمپاژ آب نیرو می‌گیرد.",
    "resources_needed": "چوب، فلز برای چرخ‌دنده‌ها و محورها، سنگ برای پایه",
    "effort": "زیاد - ساخت یک آسیاب بادی شامل مهارت‌های قابل توجه نجاری و مهندسی است. شما باید پره‌ها، برج و مکانیزم‌های داخلی را طراحی و بسازید."
  },
  {
    "title": "کره سماوی",
    "description": "یک مدل از کره سماوی با حلقه‌هایی که دایره‌های بزرگ را نشان می‌دهند.",
    "resources_needed": "فلز برای حلقه‌ها و پایه، ابزار برای خم کردن و اتصال فلز، دانش نجوم",
    "effort": "متوسط - شامل کار دقیق فلز و مونتاژ است. نیاز به درک حرکات سماوی برای قرار دادن دقیق حلقه‌ها دارد."
  },
  {
    "title": "موتور محاصره (منجنیق یا катаپولت)",
    "description": "یک منجنیق یا катаپولت برای نمایش اصول مکانیک و فیزیک.",
    "resources_needed": "چوب، طناب، فلز برای محورها و وزنه‌های تعادل",
    "effort": "متوسط تا زیاد - ساخت یک موتور محاصره عملکردی نیاز به نجاری و درک مکانیک دارد. آزمایش و تنظیم برای عملکرد بهینه می‌تواند زمان‌بر باشد."
  },
  {
    "title": "دستگاه تقطیر",
    "description": "یک تنظیم برای خالص‌سازی مایعات از طریق تقطیر.",
    "resources_needed": "شیشه یا فلز برای فلاسک و کندانسور، منبع حرارت، لوله",
    "effort": "متوسط - نیاز به مهارت‌های پایه شیشه‌گری یا فلزکاری دارد. تنظیم و حفظ دمای صحیح برای تقطیر شامل نظارت دقیق است."
  },
  {
    "title": "قطب‌نما",
    "description": "یک قطب‌نمای مغناطیسی برای ناوبری.",
    "resources_needed": "سوزن مغناطیسی شده، محفظه غیر مغناطیسی، آب یا روغن برای میرا کردن",
    "effort": "کم - ساخت یک قطب‌نما نسبتاً ساده است. چالش اصلی مغناطیسی کردن سوزن و اطمینان از تعادل و آزادی چرخش آن است."
  },
  {
    "title": "آبراه",
    "description": "یک سیستم برای انتقال آب با استفاده از گرانش.",
    "resources_needed": "سنگ یا آجر، ملات، ابزار برای برش و شکل‌دهی سنگ",
    "effort": "بسیار زیاد - ساخت یک آبراه شامل کار ساخت و ساز گسترده و مهندسی است. تضمین گرادیان ثابت برای جریان آب نیاز به برنامه‌ریزی و اجرای دقیق دارد."
  }
]
```

**سوسک زمان:** این نوع خروجی ساختاریافته می‌تواند به سرویس یا برنامه دیگری که می‌تواند داده‌های JSON را مصرف کند، ارسال شود.

## استخراج داده‌ها از پیش‌نویس‌ها

**سوسک زمان:** تصور کنید در حال ساخت یک چت‌بات هستید که به کاربران کمک می‌کند اطلاعاتی درباره سفرها برای رزرو پیدا کنند. شما می‌خواهید جزئیات کلیدی را از ورودی کاربر استخراج کنید تا پاسخ‌های مرتبط ارائه دهید. فرض کنید توضیحی مانند زیر دارید:

> تایپ کنید که کجا می‌خواهید بروید، چه زمانی می‌خواهید سفر کنید و بودجه شما چقدر است.

یک پیش‌نویس که اطلاعات را استخراج می‌کند چگونه به نظر می‌رسد؟

> پیش‌نویس: اطلاعات زیر را از پیش‌نویس کاربر استخراج کنید: مکان، زمان، بودجه، ارز، با داده‌های استخراج شده در فرمت JSON پاسخ دهید.
>
> پیش‌نویس کاربر: می‌خواهم در ژوئن به یونان بروم، بودجه من 800 یورو است.


> پاسخ:

```json
{
  "location": "یونان",
  "when": "ژوئن",
  "budget": 800,
  "currency": "یورو"
}
```

**لئوناردو:** جورج (سوسک زمان) دیگر حرف نمی‌زند، اینطور نیست؟

**شما:** بگذار ببینم می‌توانم دکمه خاموش را پیدا کنم.

**سوسک زمان:** بیایید این را با یک پیش‌نویس مشابه امتحان کنیم، بیایید ورودی کاربر را کمی تغییر دهیم تا مطمئن شویم مدل کار درست را انجام می‌دهد.

> پیش‌نویس: اطلاعات زیر را از پیش‌نویس کاربر استخراج کنید: مکان، زمان، بودجه، ارز. با داده‌های استخراج شده در فرمت JSON پاسخ دهید. پیش‌نویس کاربر: قصد دارم به ایالات متحده بروم، حداکثر 1200 دلار، شاید ژانویه.
>
> پاسخ:

```json
{
  "location": "ایالات متحده",
  "when": "ژانویه",
  "budget": 1200,
  "currency": "دلار"
}
```

کاری که شما به عنوان یک توسعه‌دهنده می‌توانید انجام دهید این است که یک الگو ایجاد کنید:

```text
اطلاعات زیر را از پیش‌نویس کاربر استخراج کنید: مکان، زمان، بودجه، ارز، با داده‌های استخراج شده در فرمت JSON پاسخ دهید، پیش‌نویس کاربر: {user_input}.
```

**شما:** پیدایش کردم، بگیر جورج!

**سوسک زمان:** _در حال خاموش شدن_.

**لئوناردو:** بالاخره آرامش و سکوت.

**سوسک زمان:** _راه‌اندازی اضطراری_. کجا بودم؟ آه بله.

**سوسک زمان:** برای چت‌بات‌ها، این یک ویژگی بسیار قدرتمند است زیرا به شما اجازه می‌دهد اطلاعات را از ورودی کاربر استخراج کنید. اگر کاربر همه جور چیزی بپرسد چه؟ می‌توانید یک الگو ایجاد کنید که در آن مهارت‌ها، کارهایی که چت‌بات شما می‌تواند انجام دهد و چه پارامترهایی نیاز دارد را توصیف کنید. در اینجا نحوه انجام آن آمده است:

```text
در اینجا برخی مهارت‌هایی که دارید آورده شده است:

skill: رزرو_سفر
parameters: مکان، زمان، بودجه، ارز

skill: پیدا_هتل
parameters: مکان، تاریخ_ورود، تاریخ_خروج، بودجه

skill: سفارش_غذا
parameters: نوع_غذا، آدرس_تحویل، روش_پرداخت

بر اساس پیش‌نویس کاربر، مشخص کنید که از کدام مهارت استفاده شود و پارامترهای لازم را استخراج کنید، با داده‌های استخراج شده در فرمت JSON با ستون‌های skill، parameters، extracted_data پاسخ دهید

{user_input}
```

بیایید ورودی‌های کاربر زیر را امتحان کنیم:

> پیش‌نویس: قصد دارم به ایالات متحده بروم، حداکثر 1200 دلار، شاید ژانویه.
> نتیجه:

```json
{
  "skill": "رزرو_سفر",
  "parameters": ["مکان", "زمان", "بودجه", "ارز"],
  "extracted_data": {
    "مکان": "ایالات متحده",
    "زمان": "ژانویه",
    "بودجه": 1200,
    "ارز": "دلار"
  }
}
```

> پیش‌نویس: می‌خواهم یک محل اقامت در نیویورک رزرو کنم
> نتیجه: 

```json
{
  "skill": "پیدا_هتل",
  "parameters": ["مکان", "تاریخ_ورود", "تاریخ_خروج", "بودجه"],
  "extracted_data": {
    "مکان": "نیویورک",
    "تاریخ_ورود": null,
    "تاریخ_خروج": null,
    "بودجه": null
  }
}
```

این ترکیب از ارائه مهارت‌ها و پارامترها و استخراج داده‌ها از پیش‌نویس‌ها به عنوان _فراخوانی ابزار_ یا _فراخوانی تابع_ نیز شناخته می‌شود. چنین پاسخی از مدل شما به عنوان یک توسعه‌دهنده آسان می‌کند که بفهمید کاربر چه می‌خواهد و چگونه یک تابع مربوطه را برای برآورده کردن درخواست کاربر فراخوانی کنید.

**شما:** اطلاعات بسیار مفیدی بود، جورج!

## تکلیف - تعمیر پیچ هوایی

**سوسک زمان:** من به توجه هر دوی شما نیاز دارم، ما یک مشکل داریم. پیچ هوایی در حین فرار از سربازان رومی و فرود در امپراتوری آزتک آسیب دیده است. ماشین لئوناردو داوینچی بسیار حساس است و برای تعمیر آن به ورودی بسیار خاصی نیاز دارد. شما باید اطلاعات لازم را به سوسک زمان (دستیار هوش مصنوعی) خود ارائه دهید تا به شما در تعمیر پیچ هوایی کمک کند.

**لئوناردو:** بنابراین من موفق شدم آسیب پیچ هوایی را تعمیر کنم اما اکنون به یک دنباله بوت نیاز دارد: چپ، چپ، بالا، راست.

**شما:** به اندازه کافی آسان به نظر می‌رسد، فقط آن متن؟

**لئوناردو:** بله، اما خاص است، باید آینه‌ای باشد، این روشی است که من همه متن‌هایم را می‌نویسم. و البته من از رمز سزار با جابجایی 3 استفاده می‌کنم چون ایتالیایی هستم. :-)

**شما:** بله، می‌توانی فقط آن را تایپ کنی؟

**لئوناردو:** می‌توانستم، اما کنجکاو هستم ببینم که تو و سوسک زمان می‌توانید این کار را انجام دهید.

**شما:** بسیار خوب.

**دستورالعمل:** یک پیش‌نویس بنویسید که دنباله بوت را برای پیچ هوایی درخواست کند، متن باید آینه‌ای باشد و با رمز سزار با جابجایی 3 رمزگذاری شود. با متن رمزگذاری شده پاسخ دهید.

برای شروع، برنامه [نمونه](/app/README.md) را ببینید. این برنامه شامل یک پروژه Node.js با تمام وابستگی‌های مورد نیاز شما است.

> توجه: اگر هنوز یک فضای کد ایجاد نکرده‌اید، لطفاً اکنون این کار را انجام دهید زیرا برای کار ارتباط هوش مصنوعی در برنامه نمونه به آن نیاز دارید.
>
> بخش _گزینه 1: ایجاد یک فضای کد گیت‌هاب_ را در سند [راه‌اندازی محیط شما](/docs/setup/README.md) ببینید.

## راه‌حل

[راه‌حل](./solution/solution.md)

## چالش

مثال رزرو سفر، ارائه مهارت‌ها و استخراج پارامترها را به حوزه مورد نظر خود تطبیق دهید. یک پیش‌نویس بنویسید که یک ورودی کاربر را درخواست کند و سپس اطلاعات لازم را برای برآورده کردن درخواست کاربر استخراج کند. با داده‌های استخراج شده در فرمت JSON با ستون‌های skill، parameters و extracted_data پاسخ دهید.

همچنین مهارت را بر اساس ورودی کاربر تعیین کنید.

## خلاصه

در این فصل، شما درباره خروجی ساختاریافته و نحوه استفاده از آن برای ارائه اطلاعات به روشی ساختاریافته یاد گرفتید.

شما روش‌های مختلفی برای شکل‌دهی خروجی را بررسی کردید، از جمله راهنمایی مدل در پیش‌نویس، ارائه یک الگوی خروجی و استفاده از فرمت‌هایی مانند JSON، XML یا CSV.

علاوه بر این، شما یاد گرفتید که چگونه داده‌ها را از پیش‌نویس‌ها استخراج کنید و آن‌ها را در یک فرمت ساختاریافته ارائه دهید.

با استفاده مؤثر از خروجی ساختاریافته، می‌توانید درک و مصرف اطلاعات تولید شده توسط مدل‌های هوش مصنوعی مولد را آسان‌تر کنید.

## بررسی دانش

**سوال**: خروجی ساختاریافته برای چه مواردی استفاده می‌شود؟ همه موارد اعمال را انتخاب کنید.

الف. ارائه اطلاعات به روشی ساختاریافته.

ب. استخراج داده‌ها از پیش‌نویس‌ها.

ج. تولید متن بدون ساختار.

[راه‌حل آزمون](./solution/solution-quiz.md)

## منابع خودآموزی

- [مجموعه ویدیویی هوش مصنوعی مولد با جاوااسکریپت](https://aka.ms/genai-js)
